<?xml version="1.0" encoding="ISO-8859-1"?>
<document>
  <properties>
    <author email="rhill@wanadoo.fr">Gilles Dodinet</author>
    <title>Synchronizer Overview</title>
  </properties>
  <body>
    <section name="Synchronizer Overview">
    
        <p>
          The ISynchronizer defines the interface both IDE and POM Synchronizers implement. 
          Both of them follow the Template Pattern : 
          <source>
<font color="#660000"><b>public abstract class</b></font> AbstractPomSynchronizer <font color="#660000"><b>implements</b></font> ISynchronizer {
    ....
    <font color="#660000"><b>public synchronized void</b></font> synchronize()  {
        <font color="#660000"><b>try</b></font> {
            preSynchronization();
            mavenize();
            postSynchronization();
        }
        <font color="#660000"><b>catch</b></font> ( Exception e ) {
            log.debug("Unable to synchronize POM due to : " + e);
        }
    }
    ....
}
		  </source>
	    </p>
	    <p>
	      That allows various IDE plugins to take special actions before and after the synchronization process
		  (like particular configuration and deconfiguration) and also to handle the synchronization in a way 
		  that is relevant with regard to the targeted IDE.
	    </p>
	    <p>
	      The SynchronizerFactory uses <a href="http://jakarta.apache.org/commons-discovery">commons-discovery</a> 
	      to lookup the correct implementation. If a discovered implementation can handle the synchronization process,
		  <code>public boolean canHandle(int direction)</code> returns true, where <code>direction</code> can be one of 
	  	  <code>ISynchronizer.IDE_TO_POM</code> or <code>ISynchronizer.POM_TO_IDE</code>. Please note that depending 
		  of the classloading strategy of the IDE, this may cause problem. For instance, this mechanism cannot be used for
		  the Eclipse plugin since Core and UI plugins are now separated, Core has no knowledge of the UI classes thus making 
		  this strategy unusable. This should be refactored to use something like IOC pattern instead.
          <center>
		    <img src="images/diags/sync-diagram.gif"/><br/>
		    <font size="-1"><b>Figure 1</b><i>Synchronization Package</i></font>
		  </center>
        </p>
	
    </section>
  </body>
</document>