<project default="build-all" 
		 xmlns:maven="jelly:maven" 
		 xmlns:j="jelly:core"
		 xmlns:util="jelly:util">
  
  <goal name="mevenide:install-maven-eclipse-plugin-plugin" 
  	    description="Checkout maven-eclipse-plugin-plugin from cvs and install it">
  	 <attainGoal name="scm:checkout-project"/>
  	 <util:file var="mavenEclipsePluginPluginPom" name="${maven.scm.checkout.dir}/maven-plugins/maven-eclipse-plugin-plugin/project.xml"/>
	 <maven:maven descriptor="${mavenEclipsePluginPluginPom}" goals=" plugin:install,plugin:deploy"/>
  </goal>
  
  <goal name="mevenide:init" description="Copy eclipse dependencies to maven.repo.local if necessary">
    <util:file var="installScript" name="${basedir}/install-dependencies.xml"/>
    <j:include file="${installScript}"/>
  </goal>
  
  <goal name="mevenide:build-all" description="Build all Mevenide modules" prereqs="mevenide:init">
    <attainGoal name="multiproject:goal"/>
    <attainGoal name="mevenide:create-update"/>
  </goal>
  
  <goal name="mevenide:create-update" description="Build Eclipse plugin update site">
  	<util:file var="updateSiteProjectDescriptor" name="${basedir}/../mevenide-update/project.xml"/>
    <maven:maven descriptor="${updateSiteProjectDescriptor}" goals="eclipse-plugin:create-site-dist"/>
  </goal>
  
  <goal name="mevenide:build-core" description="Build Mevenide-core module">
  	 <util:file var="mevenideCoreProjectdescriptor" name="${basedir}/../mevenide-core/project.xml"/>
	 <maven:maven descriptor="${mevenideCoreProjectdescriptor}" goals="clean,jar:install"/> 	 
  </goal>
    
  <goal name="mevenide:build-site" description="Build Mevenide Site">
  	<j:set var="maven.multiproject.excludes" value="${maven.multiproject.excludes},mevenide-feature/project.xml"/>
  	<j:set var="maven.multiproject.includes" value="${maven.multiproject.excludes},maven-eclipse-plugin-plugin/project.xml"/>
  	<attainGoal name="multiproject:site"/>
  </goal>
  
</project>
