<project default="build-all" 
		 xmlns:maven="jelly:maven" 
		 xmlns:j="jelly:core"
		 xmlns:multiproject="multiproject"
		 xmlns:ant="jelly:ant"
		 xmlns:define="jelly:define"
		 xmlns:util="jelly:util"
		 xmlns:mevenide="mevenide">
  
  <goal name="mevenide:install-maven-eclipse-plugin-plugin" 
  	    description="Checkout maven-eclipse-plugin-plugin from cvs and install it">
  	    
  </goal>
  
  <goal name="init" description="Copy eclipse dependencies to maven.repo.local if necessary">
    <util:file var="installScript" name="${basedir}/install-dependencies.xml"/>
    <j:include file="${installScript}"/>
  </goal>
  
  <goal name="build-all" description="Build all Mevenide modules" prereqs="init">
    <attainGoal name="multiproject:goal"/>
  </goal>
  
  <goal name="build-update-site" description="Build Eclipse plugin update site">
  	<maven:pom var="updateSiteProjectDescriptor" projectDescriptor="${basedir}/../mevenide-update/project.xml"/>
    <maven:maven descriptor="${updateSiteProjectDescriptor}" goals="create-site-dist"/>
  </goal>
  
  <goal name="build-core" description="Build Mevenide-core module">
  	 <util:file var="mevenideCoreProjectdescriptor" name="${basedir}/../mevenide-core/project.xml"/>
	 <maven:maven descriptor="${mevenideCoreProjectdescriptor}" goals="clean,jar:install"/> 	 
  </goal>
    
  <goal name="build-site" description="Build Mevenide Site">
  	<j:set var="maven.multiproject.excludes" value="${maven.multiproject.excludes},mevenide-feature/project.xml"/>
  	<attainGoal name="multiproject:site"/>
  </goal>
  
  
</project>
