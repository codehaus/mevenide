<?xml version="1.0" encoding="UTF-8"?>
<project xmlns:j="jelly:core">
	
	<!-- crap -->
	<preGoal name="test:test">
	  <attainGoal name="mevenide:prepare-fs"/>
	</preGoal>
	
	<preGoal name="jar:jar">
	  <copy toDir="${maven.build.dest}/META-INF/services">
	    <fileset dir="etc/META-INF/services">
  	   	  <include name="*.*"/>
	    </fileset>
	  </copy>
	  <copy toDir="${maven.build.dest}/templates/standard">
	    <fileset dir="etc/templates/standard">
  	  	  <include name="*.*"/>
		</fileset>
	  </copy>
	  <copy toDir="${maven.build.dest}">
	    <fileset dir="etc">
  	  	  <include name="*.*"/>
		</fileset>
	  </copy>
	</preGoal>
	
	<goal name="mevenide:finalize">
	  <copy file="etc/mevenide.properties" todir="${mevenide.ui.eclipse.project.name}/etc"/> 
	</goal>
	
	<goal name="mevenide:prepare-fs">
		<j:set var="maven.test.dest" value="${pom.getPluginContext('maven-test-plugin').getVariable('maven.test.dest')}"/>
	  <copy toDir="${maven.test.dest}">
		  <fileset dir="src/test/etc">
  			<include name="*.properties"/>
  			<include name="*.xml"/>
		  </fileset>
		</copy>
		<copy toDir="${maven.test.dest}">
		  <fileset dir="etc">
  			<include name="*.properties"/>
  			<include name="*.xml"/>
		  </fileset>
		</copy>
		<copy toDir="${maven.test.dest}/META-INF/services">
		  <fileset dir="etc/META-INF/services">
  			<include name="*.*"/>
		  </fileset>
		</copy>
   </goal>
</project>
